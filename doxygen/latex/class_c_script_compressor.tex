\hypertarget{class_c_script_compressor}{}\section{C\+Script\+Compressor Class Reference}
\label{class_c_script_compressor}\index{C\+Script\+Compressor@{C\+Script\+Compressor}}


{\ttfamily \#include $<$compressor.\+h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{class_c_script_compressor_aad31afe3d14387b163b5c043e834ca2b}{C\+Script\+Compressor} (\hyperlink{class_c_script}{C\+Script} \&script\+In)
\item 
unsigned int \hyperlink{class_c_script_compressor_a3b3dd61547c3dc2f7ba9325f74b9ec5f}{Get\+Serialize\+Size} (int n\+Type, int n\+Version) const 
\item 
{\footnotesize template$<$typename Stream $>$ }\\void \hyperlink{class_c_script_compressor_a9d8168293e0a6d0fd8c4aeb63a346525}{Serialize} (Stream \&s, int n\+Type, int n\+Version) const 
\item 
{\footnotesize template$<$typename Stream $>$ }\\void \hyperlink{class_c_script_compressor_a016fa6e3d2735d95fcf773271da073d5}{Unserialize} (Stream \&s, int n\+Type, int n\+Version)
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{class_c_script_compressor_a13afc45e3a0a8a3d634cfafba9b2a040}{Is\+To\+Key\+I\+D} (\hyperlink{class_c_key_i_d}{C\+Key\+I\+D} \&\hyperlink{cache_8cc_a11ecb029164e055f28f4123ce3748862}{hash}) const 
\item 
bool \hyperlink{class_c_script_compressor_a6da015ff028139ef52e7376166b04928}{Is\+To\+Script\+I\+D} (\hyperlink{class_c_script_i_d}{C\+Script\+I\+D} \&\hyperlink{cache_8cc_a11ecb029164e055f28f4123ce3748862}{hash}) const 
\item 
bool \hyperlink{class_c_script_compressor_a4cec58b09c4ab7873b5884ed690ed0f9}{Is\+To\+Pub\+Key} (\hyperlink{class_c_pub_key}{C\+Pub\+Key} \&pubkey) const 
\item 
bool \hyperlink{class_c_script_compressor_a98cb19f185efc85a395a5332574ef56b}{Compress} (std\+::vector$<$ unsigned char $>$ \&out) const 
\item 
unsigned int \hyperlink{class_c_script_compressor_a0e4f4c405f4a937c95fd4270db4d7d66}{Get\+Special\+Size} (unsigned int n\+Size) const 
\item 
bool \hyperlink{class_c_script_compressor_a1feb663ddab3a45218c7cb02f2a25717}{Decompress} (unsigned int n\+Size, const std\+::vector$<$ unsigned char $>$ \&out)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
Compact serializer for scripts.

It detects common cases and encodes them much more efficiently. 3 special cases are defined\+:
\begin{DoxyItemize}
\item Pay to pubkey hash (encoded as 21 bytes)
\item Pay to script hash (encoded as 21 bytes)
\item Pay to pubkey starting with 0x02, 0x03 or 0x04 (encoded as 33 bytes)
\end{DoxyItemize}

Other scripts up to 121 bytes require 1 byte + script length. Above that, scripts up to 16505 bytes require 2 bytes + script length. 

Definition at line 27 of file compressor.\+h.



\subsection{Constructor \& Destructor Documentation}
\hypertarget{class_c_script_compressor_aad31afe3d14387b163b5c043e834ca2b}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\index{C\+Script\+Compressor@{C\+Script\+Compressor}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{C\+Script\+Compressor}]{\setlength{\rightskip}{0pt plus 5cm}C\+Script\+Compressor\+::\+C\+Script\+Compressor (
\begin{DoxyParamCaption}
\item[{{\bf C\+Script} \&}]{script\+In}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{class_c_script_compressor_aad31afe3d14387b163b5c043e834ca2b}


Definition at line 55 of file compressor.\+h.



\subsection{Member Function Documentation}
\hypertarget{class_c_script_compressor_a98cb19f185efc85a395a5332574ef56b}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Compress@{Compress}}
\index{Compress@{Compress}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Compress}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Script\+Compressor\+::\+Compress (
\begin{DoxyParamCaption}
\item[{std\+::vector$<$ unsigned char $>$ \&}]{out}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}\label{class_c_script_compressor_a98cb19f185efc85a395a5332574ef56b}


Definition at line 47 of file compressor.\+cpp.



Here is the call graph for this function\+:
% FIG 0




Here is the caller graph for this function\+:
% FIG 1


\hypertarget{class_c_script_compressor_a1feb663ddab3a45218c7cb02f2a25717}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Decompress@{Decompress}}
\index{Decompress@{Decompress}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Decompress}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Script\+Compressor\+::\+Decompress (
\begin{DoxyParamCaption}
\item[{unsigned int}]{n\+Size, }
\item[{const std\+::vector$<$ unsigned char $>$ \&}]{out}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [protected]}}\label{class_c_script_compressor_a1feb663ddab3a45218c7cb02f2a25717}


Definition at line 87 of file compressor.\+cpp.



Here is the call graph for this function\+:
% FIG 2




Here is the caller graph for this function\+:
% FIG 3


\hypertarget{class_c_script_compressor_a3b3dd61547c3dc2f7ba9325f74b9ec5f}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Get\+Serialize\+Size@{Get\+Serialize\+Size}}
\index{Get\+Serialize\+Size@{Get\+Serialize\+Size}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Get\+Serialize\+Size}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int C\+Script\+Compressor\+::\+Get\+Serialize\+Size (
\begin{DoxyParamCaption}
\item[{int}]{n\+Type, }
\item[{int}]{n\+Version}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{class_c_script_compressor_a3b3dd61547c3dc2f7ba9325f74b9ec5f}


Definition at line 57 of file compressor.\+h.



Here is the call graph for this function\+:
% FIG 4


\hypertarget{class_c_script_compressor_a0e4f4c405f4a937c95fd4270db4d7d66}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Get\+Special\+Size@{Get\+Special\+Size}}
\index{Get\+Special\+Size@{Get\+Special\+Size}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Get\+Special\+Size}]{\setlength{\rightskip}{0pt plus 5cm}unsigned int C\+Script\+Compressor\+::\+Get\+Special\+Size (
\begin{DoxyParamCaption}
\item[{unsigned int}]{n\+Size}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}\label{class_c_script_compressor_a0e4f4c405f4a937c95fd4270db4d7d66}


Definition at line 78 of file compressor.\+cpp.



Here is the caller graph for this function\+:
% FIG 5


\hypertarget{class_c_script_compressor_a13afc45e3a0a8a3d634cfafba9b2a040}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Is\+To\+Key\+I\+D@{Is\+To\+Key\+I\+D}}
\index{Is\+To\+Key\+I\+D@{Is\+To\+Key\+I\+D}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Is\+To\+Key\+I\+D}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Script\+Compressor\+::\+Is\+To\+Key\+I\+D (
\begin{DoxyParamCaption}
\item[{{\bf C\+Key\+I\+D} \&}]{hash}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}\label{class_c_script_compressor_a13afc45e3a0a8a3d634cfafba9b2a040}
These check for scripts for which a special case with a shorter encoding is defined. They are implemented separately from the \hyperlink{class_c_script}{C\+Script} test, as these test for exact byte sequence correspondences, and are more strict. For example, Is\+To\+Pub\+Key also verifies whether the public key is valid (as invalid ones cannot be represented in compressed form). 

Definition at line 11 of file compressor.\+cpp.



Here is the caller graph for this function\+:
% FIG 6


\hypertarget{class_c_script_compressor_a4cec58b09c4ab7873b5884ed690ed0f9}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Is\+To\+Pub\+Key@{Is\+To\+Pub\+Key}}
\index{Is\+To\+Pub\+Key@{Is\+To\+Pub\+Key}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Is\+To\+Pub\+Key}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Script\+Compressor\+::\+Is\+To\+Pub\+Key (
\begin{DoxyParamCaption}
\item[{{\bf C\+Pub\+Key} \&}]{pubkey}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}\label{class_c_script_compressor_a4cec58b09c4ab7873b5884ed690ed0f9}


Definition at line 32 of file compressor.\+cpp.



Here is the call graph for this function\+:
% FIG 7




Here is the caller graph for this function\+:
% FIG 8


\hypertarget{class_c_script_compressor_a6da015ff028139ef52e7376166b04928}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Is\+To\+Script\+I\+D@{Is\+To\+Script\+I\+D}}
\index{Is\+To\+Script\+I\+D@{Is\+To\+Script\+I\+D}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Is\+To\+Script\+I\+D}]{\setlength{\rightskip}{0pt plus 5cm}bool C\+Script\+Compressor\+::\+Is\+To\+Script\+I\+D (
\begin{DoxyParamCaption}
\item[{{\bf C\+Script\+I\+D} \&}]{hash}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [protected]}}\label{class_c_script_compressor_a6da015ff028139ef52e7376166b04928}


Definition at line 22 of file compressor.\+cpp.



Here is the caller graph for this function\+:
% FIG 9


\hypertarget{class_c_script_compressor_a9d8168293e0a6d0fd8c4aeb63a346525}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Serialize@{Serialize}}
\index{Serialize@{Serialize}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Serialize}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename Stream $>$ void C\+Script\+Compressor\+::\+Serialize (
\begin{DoxyParamCaption}
\item[{Stream \&}]{s, }
\item[{int}]{n\+Type, }
\item[{int}]{n\+Version}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}\label{class_c_script_compressor_a9d8168293e0a6d0fd8c4aeb63a346525}


Definition at line 66 of file compressor.\+h.



Here is the call graph for this function\+:
% FIG 10


\hypertarget{class_c_script_compressor_a016fa6e3d2735d95fcf773271da073d5}{}\index{C\+Script\+Compressor@{C\+Script\+Compressor}!Unserialize@{Unserialize}}
\index{Unserialize@{Unserialize}!C\+Script\+Compressor@{C\+Script\+Compressor}}
\subsubsection[{Unserialize}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename Stream $>$ void C\+Script\+Compressor\+::\+Unserialize (
\begin{DoxyParamCaption}
\item[{Stream \&}]{s, }
\item[{int}]{n\+Type, }
\item[{int}]{n\+Version}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}\label{class_c_script_compressor_a016fa6e3d2735d95fcf773271da073d5}


Definition at line 78 of file compressor.\+h.



Here is the call graph for this function\+:
% FIG 11




The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
/home/dev/ds-\/160209/src/\hyperlink{compressor_8h}{compressor.\+h}\item 
/home/dev/ds-\/160209/src/\hyperlink{compressor_8cpp}{compressor.\+cpp}\end{DoxyCompactItemize}
